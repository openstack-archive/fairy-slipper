<div class="page-header">
  <h1>
    {{ swagger.info.title }}
  </h1>
</div>

<div ng-repeat="tag in swagger.tags">
  <h3>{{ tag.summary }}</h3>
  <div marked="tag.description"></div>
  <accordion>
    <accordion-group ng-repeat="operation in operations[tag.name]"
                     is-open="operation_open">
      <accordion-heading>
        <div class="operation-header">
          <div class="operation-method">
            <swagger-method method="operation.method"></swagger-method>
          </div>
          <div class="operation-title">
            {{ operation.title }}
            <br/>
            <small>{{ operation.summary }}</small>
          </div>
        </div>
      </accordion-heading>
      <div class="row">
        <div class="col-md-12">
          <h4>
            <swagger-path path="operation.path"
                          parameters="operation.parameters">
            </swagger-path>
          </h4>
        </div>
        <div ng-controller="ParametersCtrl" class="col-md-6">
          <tabset>
            <tab heading="Description">
              <div class="content" marked="operation.description"></div>
            </tab>
            <tab heading="Details">
              <div ng-if="parameters.header">
                <h5>Headers</h5>
                <dl>
                  <dt ng-repeat-start="parameter in parameters.header">{{parameter.name}}
                  </dt>
                  <dd ng-repeat-end>{{parameter.description}}</dd>
                </dl>
              </div>
              <div ng-if="parameters.query">
                <h5>URL Parameters</h5>
                <dl>
                  <dt ng-repeat-start="parameter in parameters.query">{{parameter.name}}
                  </dt>
                  <dd ng-repeat-end>{{parameter.description}}</dd>
                </dl>
              </div>
              <div ng-if="parameters.body">
                <h5>Request Schema</h5>
                <swagger-schema swagger="swagger" parameters="parameters.body"></swagger-schema>
              </div>
            </tab>
          </tabset>
        </div>
        <div class="col-md-6">
          <h4>Request</h4>
          <swagger-example ng-if="!isEmpty(operation.examples)"
                           swagger="swagger"
                           src="operation.examples"
                           trigger-load="operation_open">
          </swagger-example>
          <div ng-if="isEmpty(response.examples)">
            No request recorded.
          </div>
          <h4>Responses</h4>
          <accordion close-others="true">
            <accordion-group ng-repeat="(status_code, response) in operation.responses"
                             is-disabled="isEmpty(response.examples)"
                             is-open="status.open">
              <accordion-heading>
                {{ status_code }}: {{ response.description }}
                <i ng-if="!isEmpty(response.examples)"
                   class="pull-right glyphicon"
                   ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
              </accordion-heading>
              <swagger-example swagger="swagger"
                               src="response.examples"
                               trigger-load="status.open">
              </swagger-example>
            </accordion-group>
          </accordion>
        </div>
      </div>
    </accordion-group>
  </accordion>
</div>
